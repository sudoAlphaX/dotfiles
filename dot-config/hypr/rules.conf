# No rounding if only on window on workspace
workspace = w[tv1] s[false], gapsout:0, gapsin:0, rounding:0
windowrule {
  name = windowrule-1
  rounding = 0
  match:float = 1
}


# Music players
workspace = special:music, on-created-empty:[workspace special:music] $musicplayer, persistent:false
bind = $mainMod, m, togglespecialworkspace, music
exec-shutdown = pkill -SIGHUP musikcube

# YouTube player workspace (similar to music workspace)
workspace = special:youtube, on-created-empty:[workspace special:youtube] killall $youtubeplayer; $youtubeplayer, persistent:false
bind = $mainMod, y, togglespecialworkspace, youtube

# Auto launch special workspace apps
workspace = special:s1, on-created-empty:[workspace special:s1] $tmuxOpen Hyprland, persistent:false
workspace = special:s7, on-created-empty:[workspace special:s7] $terminalOpen nvtop -d 15, persistent:false
workspace = special:s8, on-created-empty:[workspace special:s8] $terminalOpen battop -d 20, persistent:false
workspace = special:s9, on-created-empty:[workspace special:s9] $terminalOpen btop, persistent:false
workspace = special:s10, on-created-empty:[workspace special:s10] killall thunderbird; uwsm app -s a -- thunderbird, persistent:false

# Discord/Vesktop inside special workspace
windowrule {
  name = discord
  workspace = special:discord
  match:initial_class = vesktop
}


# Waybar layer
layerrule {
  name = waybar
  blur = on
  match:namespace = waybar
}


# Notifications layer
layerrule {
  name = notifications
  above_lock = on
  blur = on
  animation = slidefade
  match:namespace = notifications
}


# Pip variables
$pip_rounding = 0
$pip_pos_x = 1003
$pip_pos_y = 563
$pip_size_width = 530 # 1920:1080::530:298.125
$pip_size_height = 298

# Firefox/LibreWolf pip
windowrule {
  name = firefox-pip
  float = on
  pin = on
  no_initial_focus = on
  rounding = $pip_rounding
  move = $pip_pos_x $pip_pos_y
  size = $pip_size_width $pip_size_height
  match:title = Picture-in-Picture
}


# FreeTube pip
windowrule {
  name = freetube-pip
  float = on
  pin = on
  no_initial_focus = on
  rounding = $pip_rounding
  move = $pip_pos_x $pip_pos_y
  size = $pip_size_width $pip_size_height
  match:initial_title = Picture in picture
}


# GTK Pinentry
windowrule {
  name = gtk-pinentry-focus
  stay_focused = on
  match:class = gcr-prompter
}


# KeepassXC
windowrule {
  name = keepassxc-unlock
  float = on
  stay_focused = on
  match:class = org.keepassxc.KeePassXC
  match:title = Unlock Database - KeePassXC
}

windowrule {
  name = keepassxc-access
  float = on
  stay_focused = on
  match:class = org.keepassxc.KeePassXC
  match:title = KeePassXC -  Access Request
}

windowrule {
  name = keepassxc-browser
  float = on
  stay_focused = on
  match:class = org.keepassxc.KeePassXC
  match:title = KeePassXC - Browser Access Request
}


# Mate polkit password prompt
windowrule {
  name = polkit-focus
  stay_focused = on
  match:class = polkit-mate-authentication-agent-1
  match:title = Authenticate
}


# Alacritty floating
windowrule {
  name = alacritty-float
  float = on
  stay_focused = on
  no_blur = on
  match:title = AlacrittyFloat
}


# Thunderbird message filters floating
windowrule {
  name = thunderbird-filters
  float = on
  match:title = ^(Message Filters)$
  match:class = ^(thunderbird)$
}


# SafeEyes (ignore other keybinds if safeeyes is active)
submap = safeeyes
bind = , catchall, exec, :
submap = reset
windowrule {
  name = safeeyes-force
  workspace = special:safeeyes
  stay_focused = on
  fullscreen = on
  match:class = ^(io.github.slgobinath.SafeEyes)$
  match:title = ^(SafeEyes-\d)$
}


# Float editing window of nm-connection-editor
windowrule {
  name = nm-editor-float
  float = on
  match:class = nm-connection-editor
  match:title = Editing.*
}


# Disable animations for ueberzug
windowrule {
  name = ueberzug-noanim
  no_anim = on
  match:class = ueberzugpp_.*
}


# Permissions
permission = /usr/bin/grim, screencopy, allow
permission = /usr/bin/wf-recorder, screencopy, allow
permission = /usr/bin/wayfreeze, screencopy, allow
permission = /usr/bin/hyprlock, screencopy, allow
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
